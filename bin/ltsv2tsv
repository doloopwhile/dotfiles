#!/usr/bin/env ruby
extract_values = lambda do |line, keys|
  h = Hash[line.split("\t").map { |s| s.split(':', 2) }]
  keys.map { |k| h[k] }.join("\t")
end

extract_keys = lambda do |line|
  line.split("\t").map { |s| s.sub(/:.*/, '') }
end

first_line = ARGF.gets
keys = extract_keys.call(first_line)
puts keys.join("\t")
puts extract_values.call(first_line, keys)

while line = ARGF.gets
  puts extract_values.call(line, keys)
end
